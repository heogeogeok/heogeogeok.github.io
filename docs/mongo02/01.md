---
layout: default
title: 2.1. Data Storage
parent: 2. Memory Management
nav_order: 1
---
2.1. DATA STORAGE
{: .fs-10 .text-center }

### Document-Oriented Storage (BSON)

MongoDB's document-oriented design, which we've discussed earlier, works seamlessly with BSON, the binary format used for storing documents. BSON, short for Binary JSON, is an open standard, and you can find its specification at bsonspec.org.

### Key Points about BSON

1. **Efficiency Over Space-Saving**: `<br>`
   MongoDB prioritizes speed over space efficiency. While BSON might take up more space than JSON in some cases, it makes traversing and indexing documents much faster. This tradeoff is generally acceptable because MongoDB is designed to scale across machines, and storage is relatively inexpensive. WiredTiger, MongoDB's default storage engine, supports multiple compression libraries and has index and data compression enabled by default. Compression levels can be configured both at the server level and per collection, allowing you to balance CPU usage with disk space savings.
2. **Ease of Conversion**: `<br>`
   BSON is easy to convert to a programming language’s native data format. If MongoDB used pure JSON, a higher-level conversion would be necessary, potentially slowing down operations. MongoDB drivers are available for many programming languages (e.g., Python, Ruby, PHP, C, C++, and C#), and each works slightly differently. The simple binary format of BSON allows native data structures to be built quickly in each language, making the code simpler and faster.
3. **BSON Extension**: `<br>`
   BSON provides some extensions to JSON, such as the ability to store binary data and specific data types. While BSON can store any JSON document, a valid BSON document may not be valid JSON. This distinction is handled by MongoDB’s drivers, which convert data to and from BSON without needing to use JSON as an intermediary format.

The WiredTiger storage engine manages data in page units. The pages are connected via a B-tree structure and within each page, data is stored in a cell struct format. Additionally, to reduce data storage space, the Snappy compression algorithm is used to compress the page. The Snappy compression algorithm is used by default, but the settings can be changed.

To search for a page in the WiredTiger storage engine metadata files, `WiredTiger.tutle`, `WiredTiger.wt`, and `_md_catalog.wt` must be interpreted. The WiredTiger.tutle file has a general text file format, and the WiredTiger.wt file's root page offset is included in the configuration string. By interpreting the B-tree structure starting with the `WiredTiger.wt` file's root page offset and then extracting the data, the configuration strings of the `collection-#-####∼.wt` file and the _md_catalog.wt file can be determined. The `collection-#-####∼.wt` file is the file where the actual data is stored. The _md_catalog.wt file stores data that can connect the namespace string and the data file name. The `collection-#-####∼.wt` file is the file that stores actual user data; one is created per collection. The # in the file name depicts the number, and the number behind the first hyphen increases by one as the files get created. The numbers behind the second hyphen are 19 randomly generated numbers that define the file name. User data is stored in a BSON format in the cell struct of the leaf page.
